<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta name="author" content="Virx">
    <meta name="description" content="Preview the Big Number Calculator open-source library">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="http://www.calcplus.ml/lib/favicon.png">
    <script type="text/javascript" src="http://www.calcplus.ml/lib/jquery.js"></script>
    <script type="text/javascript" src="https://combinatronics.com/VirxEpicoder/BigNumberCalculator/master/BNC-Lib.js"></script>
    <title>CalcPlus</title>
    <style>
      body {
        font-size:15pt;
        background:grey;
      }
      a {
        color:lightblue;
      }
      .removeInput {
          color: grey;
          background: rgb(255, 110, 110);
          border: none;
      }
      .removeInput:hover {
          color:black;
          background: red;
          border: none;
      }
    </style>
    <script>
      "use strict";
      var $ = jQuery;
      $(document).ready(function(){
        try {
          if (add("1", "1") != 2) {
            throw new Exception("Library Not Loaded");
          }
        } catch(err){
          $("body").html("Library couldn't be loaded! Please allow <i>Chrome</i>, (Yes, I'm looking at you, <i>Chrome</i>,) to load the 'Unsafe Scripts'. I promise the script is safe, <i>CHROME</i> is just pickey because the script is coming from an HTTP source, and not HTTPS like this webpage. Thank you!");
          console.error("Library wasn't loaded!!!");
        }
        try {
          var inputBoxes = 2;
          var getChecked = function(name) {
            return $("#"+name).is(":checked");
          };

          var runCalc = function() {
            var final = {
              num: 0,
              display: false
            };
            if (getChecked("add")) {
              final.num = add($("#input1").val(), $("#input2").val());
              if (inputBoxes > 2) {
                for (var i=3; i<=inputBoxes; i++) {
                  final.num = add(final.num, $("#input"+i.toString()).val());
                }
              }
              final.display = true;
            } else if (getChecked("sub")) {
              final.num = sub($("#input1").val(), $("#input2").val());
              if (inputBoxes > 2) {
                for (var s=3; s<=inputBoxes; s++) {
                  final.num = sub(final.num, $("#input"+s.toString()).val());
                }
              }
              final.display = true;
            } else if (getChecked("multi")) {
              final.num = multi($("#input1").val(), $("#input2").val());
              if (inputBoxes > 2) {
                for (var m=3; m<=inputBoxes; m++) {
                  final.num = multi(final.num, $("#input"+m.toString()).val());
                }
              }
              final.display = true;
            } else if (getChecked("div")) {
              console.warn("Division algorithm was called, but doesn't exist.");
            } else {
              console.error("ran nothing");
            }
            
            if (final.display) {
              $("#output").text("Answer: "+final.num.toString());
            }
          };

          $("button#addInput").click(function(){
            inputBoxes++;
            $("#extraInputs").append('<span id="id'+inputBoxes+'">Number: <input type="text" id="input'+inputBoxes+'" label="Number input field #'+inputBoxes+'"/> <button class="removeInput" id="'+inputBoxes+'" onclick="this.parentNode.remove();inputBoxes--;" label="Delete input field #'+inputBoxes+'">X</button><br></span>');
          });

          $("button#calc").click(function(){
            runCalc();
          });
        } catch(err) {
          console.error(err);
        }
      });
    </script>
  </head>
  <body>
    <a href="https://virxec.github.io/BigNumberCalculator">Home</a>
    <form>
      <input type="radio" id="add" name="math-type" label="Addition Algorithm" checked="checked"> Addition
      <br>
      <input type="radio" id="sub" name="math-type" label="Subtraction Algorithm"> Subtraction
      <br>
      <input type="radio" id="multi" name="math-type" label="Multiplication Algorithm - In development"> Multiplication (In development)
      <br>
      <input type="radio" id="div" name="math-type" label="Division Algorithm - Unavailable"> Division (Unavailable)
    </form>
    <br>
    <button id="addInput">Add another input field</button>
    <br>
    Number: <input type="text" id="input1" label="Number input field #1">
    <br>
    Number: <input type="text" id="input2" label="Number input field #2">
    <br>
    <span id="extraInputs"></span>
    <button id="calc">Calculate...</button>
    <br>
    <br>
    <p id="output">Press "Calculate..."</p>
  </body>
</html>
