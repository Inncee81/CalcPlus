<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <meta name="description" content="Works with really large numbers">
    <meta name="keywords" content="HTML,CSS,JavaScript,InfiniCalc,BigCalc,Big,Infitite,Calculator,Large,Number,Not,Small,Numbers,CalcPlus,Calc,Plus,Big Number Calculator,Big # Calc,GitHub">
    <meta name="author" content="Virx">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://virxec.github.io/BigNumberCalculator/logo.png">
    <title>CalcPlus</title>
    <style>
      span.broken {color:red;}
      span.working {color:green;}
    </style>
  </head>
  <body>
    <noscript>Library couldn't be loaded! Please allow JavaScript to run on this page, or else most things won't work. Thank you!<br></noscript>
    <h1>Welcome the Big Number Calculator</h1>
    <h2>Status of Library: <span class="working">WORKING</span></h2>
    <h3>Want to browse around offline?<button id="goOffline" onclick="registerWorkers()">Click here!!!</button></h3>
      
    <h3>Resources</h3>
    <a href="https://virxec.github.io/BigNumberCalculator/PreviewLibrary.html">Preview the library</a>
    <br>
    <a href="https://virxec.github.io/BigNumberCalculator/LibrarySource.html">View Library</a>
    
    <h3>About BNC and how to get BNC</h3>
    <a href="https://virxec.github.io/BigNumberCalculator/AboutLibrary.html">About</a>
    
    <h3>Want to help out this project?</h3>
    <a href="https://github.com/VirxEC/BigNumberCalculator/projects/1">To do page</a>
    <br>
    <a href="https://github.com/VirxEC/BigNumberCalculator/issues/new?assignees=VirxEC&labels=bug&template=bug_report.md&title=%5BBUG%5D">Sumbit a bug report</a>
    <br>
    <a href="https://github.com/VirxEC/BigNumberCalculator/issues/new?assignees=VirxEC&labels=enhancement&template=feature_request.md&title=%5BFEATURE+REQUEST%5D">Suggest a feature</a>
    <br>
    <a href="https://github.com/VirxEC/BigNumberCalculator/compare">Submit a pull request</a>
    
    <script>
      var goOffline = document.getElementById("goOffline");
      
      if(localStorage.getItem("isOffline") == "true") {
        goOffline.parentNode.remove(0);
      }
      
      function registerWorkers() {
        goOffline.textContent = "Checking...";
        if('serviceWorker' in navigator) {
          goOffline.textContent = "Loading Service Wokers...";
          
          navigator.serviceWorker.register("/index.html");
          navigator.serviceWorker.register("/PreviewLibrary.html");
          navigator.serviceWorker.register("/LibrarySource.html");
          navigator.serviceWorker.register("/AboutLibrary.html");
          navigator.serviceWorker.register("/BNC-Lib.js");
          navigator.serviceWorker.register("/logo.png");
          navigator.serviceWorker.ready.then(function (registration) {
            console.log('Service worker successfully registered on scope', registration.scope);
          });
          
          localStorage.setItem("isOffline", "true");
          goOffline.parentNode.remove(0);
        } else {
          goOffline.textContent = "Your browser doesn't support Service Workers. Please use one of the major browsers, like Google Chrome.";
        }
      }
      
      if (localStorage.getItem("isOffline") == "true") {
        self.addEventListener('install', function(event) {
          event.waitUntil(
            caches.open('bnc-github-v1').then(function(cache) {
              return cache.addAll([
                "/logo.png"
              ]);
            })
          );
        });
        
        self.addEventListener('install', function(event) {
          console.log('Installed index.html', event);
        });

        self.addEventListener('activate', function(event) {
          console.log('Activated index.html', event);
        });
        
        self.addEventListener('fetch', (e) => {
         e.respondWith(caches.match(e.request).then((response) => {
          if(response) return response
          else return fetch(e.request)
         }) )
        })
      }
    </script>
  </body>
</html>
