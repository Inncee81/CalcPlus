<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta name="author" content="Virx">
    <meta name="description" content="Preview the CalcPlus open-source library">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../assets/logo.png">
    <script src="../assets/Library.js"></script>
    <script src="../assets/CPquery.js"></script>
    <script src="../assets/Options.js"></script>
    <title>Preview the CalcPlus Library</title>
    <style>
      body { color: white; background-color: white; }
      a { color: white; }
      button { color: white; }
      .removeInput { color: white; background: white; border: none; }
      nav a { background-color: white; color: white; }
      nav a:link, nav a:visited { background-color: white; color: white; }
      nav a:hover, nav a:active { background-color: white; color: white; }
    </style>
  </head>
  <body>
    <nav>
      <a href="../">Home</a>
      <a href="../LibrarySource/">Library Source</a>
      <a href="../CPQuerySource/">View CPQuery Source</a>
      <a href="../AboutLibrary/">About the CalcPlus Library</a>
      <a href="../PageOptions/">Page Options</a>
      <a href="../SiteDiscord/">Offical Discord</a>
    </nav>
    <br>
    <noscript>Please allow JavaScript to run on this page, or else most things won't work. Thank you!<br></noscript>
    <span class="console"></span>
    <form>
      <input type="radio" id="add" name="math-type" label="Addition Algorithm" checked="checked"> Addition
      <br>
      <input type="radio" id="sub" name="math-type" label="Subtraction Algorithm"> Subtraction
      <br>
      <input type="radio" id="multi" name="math-type" label="Multiplication Algorithm"> Multiplication
      <br>
      <input type="radio" id="expo" name="math-type" label="Exponents Algorithm (No decimals)"> Exponents (No decimals)
      <br>
      <input type="radio" id="div" name="math-type" label="Division Algorithm - In development"> Division (In development)
      <br>
      <input type="radio" id="isLessThan" name="math-type" label="Is Less Than Algorithm"> Is Less Than
      <br>
      <input type="radio" id="isGreaterThan" name="math-type" label="Is Greater Than Algorithm"> Is Greater Than
      <br>
      <input type="radio" id="isLessThanEqual" name="math-type" label="Is Less Than or Equal to Algorithm"> Is Less Than or Equal to
      <br>
      <input type="radio" id="isGreaterThanEqual" name="math-type" label="Is Greater Than or Equal to Algorithm"> Is Greater Than or Equal to
      <br>
      <input type="radio" id="round" name="math-type" label="Round Algorithm"> Round
      <br>
      <input type="radio" id="roundUp" name="math-type" label="Round up Algorithm"> Round Up
      <br>
      <input type="radio" id="roundDown" name="math-type" label="Round down Algorithm"> Round Down
    </form>
    <br>
    <button id="addInput">Add another input field</button>
    <br>
    Number: <input type="text" id="input1" label="Number input field #1">
    <br>
    Number: <input type="text" id="input2" label="Number input field #2">
    <br>
    <span id="extraInputs"></span>
    <button id="calc">Calculate...</button>
    <br>
    <br>
    <p id="output">Press "Calculate..."</p>
    
    <script>
      var inputBoxes = 2;
      var divChecked = false;

      var getChecked = function(name) {
        return $(`#${name}`).checked();
      };
      $("#div").click(function() {
        divChecked = true;
        $("#extraInputs").html.append('<span id="divMax">Max decimal place: <input type="text" id="maxDecimal" label="Max number of decimals for division algorithm"/> <button class="removeInput" id="divMax" onclick="this.parentNode.remove();divChecked=false;document.getElementById("div").checked=false;document.getElementById("add").checked=true;" label="Delete max decimal field for division algorithm">X</button><br></span>');
      });

      var runCalc = function() {
        var final = {
          num: 0,
          display: false
        };
        if (getChecked("add")) {
          final.num = add($("#input1").val(), $("#input2").val());
          if (inputBoxes > 2) {
            for (var i=3; i<=inputBoxes; i++) {
              final.num = add(final.num, $(`#input${i.toString()}`).val());
            }
          }
          final.display = true;
        } else if (getChecked("sub")) {
          final.num = sub($("#input1").val(), $("#input2").val());
          if (inputBoxes > 2) {
            for (var s=3; s<=inputBoxes; s++) {
              final.num = sub(final.num, $(`#input${s.toString()}`).val());
            }
          }
          final.display = true;
        } else if (getChecked("multi")) {
          final.num = multi($("#input1").val(), $("#input2").val());
          if (inputBoxes > 2) {
            for (var m=3; m<=inputBoxes; m++) {
              final.num = multi(final.num, $(`#input${m.toString()}`).val());
            }
          }
          final.display = true;
        } else if (getChecked("expo")) {
          final.num = expo($("#input1").val(), $("#input2").val());
          if (inputBoxes > 2) {
            for (var e=3; e<=inputBoxes; e++) {
              final.num = expo(final.num, $(`#input${e.toString()}`).val());
            }
          }
          final.display = true;
        } else if (getChecked("div")) {
          var maxDecimals = $("#divMax").val();
          final.num = div($("#input1").val(), $("#input2").val(), maxDecimals);
          if (inputBoxes > 2) {
            for (var e=3; e<=inputBoxes; e++) {
              final.num = div(final.num, $(`#input${e.toString()}`).val(), maxDecimals);
            }
          }
          final.display = true;
        } else if (getChecked("isLessThan")) {
          final.num = isLessThan($("#input1").val(), $("#input2").val());
          if (inputBoxes > 2) {
            for (var e=3; e<=inputBoxes; e++) {
              final.num = isLessThan(final.num, $(`#input${e.toString()}`).val());
            }
          }
          final.display = true;
        } else if (getChecked("isGreaterThan")) {
          final.num = isGreaterThan($("#input1").val(), $("#input2").val());
          if (inputBoxes > 2) {
            for (var e=3; e<=inputBoxes; e++) {
              final.num = isGreaterThan(final.num, $(`#input${e.toString()}`).val());
            }
          }
          final.display = true;
        } else if (getChecked("isLessThanEqual")) {
          final.num = isLessThanEqual($("#input1").val(), $("#input2").val());
          if (inputBoxes > 2) {
            for (var e=3; e<=inputBoxes; e++) {
              final.num = isLessThanEqual(final.num, $(`#input${e.toString()}`).val());
            }
          }
          final.display = true;
        } else if (getChecked("isGreaterThanEqual")) {
          final.num = isGreaterThanEqual($("#input1").val(), $("#input2").val());
          if (inputBoxes > 2) {
            for (var e=3; e<=inputBoxes; e++) {
              final.num = isGreaterThanEqual(final.num, $(`#input${e.toString()}`).val());
            }
          }
          final.display = true;
        } else if (getChecked("round")) {
          final.num = round($("#input1").val(), $("#input2").val());
          if (inputBoxes > 2) {
            for (var e=3; e<=inputBoxes; e++) {
              final.num = round(final.num, $(`#input${e.toString()}`).val());
            }
          }
          final.display = true;
        } else if (getChecked("roundUp")) {
          final.num = roundUp($("#input1").val(), $("#input2").val());
          if (inputBoxes > 2) {
            for (var e=3; e<=inputBoxes; e++) {
              final.num = roundUp(final.num, $(`#input${e.toString()}`).value);
            }
          }
          final.display = true;
        } else if (getChecked("roundDown")) {
          final.num = roundDown($("#input1").val(), $("#input2").val());
          if (inputBoxes > 2) {
            for (var e=3; e<=inputBoxes; e++) {
              final.num = roundDown(final.num, $(`#input${e.toString()}`).val());
            }
          }
          final.display = true;
        } else {
          console.error("ran nothing");
        }
        if (final.display) {
          $("#output").text.replace("Answer: "+final.num);
        }
      };
      $("#addInput").click(function(){
        inputBoxes++;
        $("#extraInputs").html.append(`<span id="id${inputBoxes}">Number: <input type="text" id="input${inputBoxes}" label="Number input field #'+inputBoxes+'"/> <button class="removeInput" id="'+inputBoxes+'" onclick="this.parentNode.remove();inputBoxes-=1;" label="Delete input field #'+inputBoxes+'">X</button><br></span>`);
      });
      $("#calc").click(function(){
        runCalc();
      });
    </script>
  </body>
</html>
